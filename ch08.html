<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 8. Mòduls</title><link rel="stylesheet" href="byte.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.68.1" /><link rel="start" href="index.html" title="A Byte of Python - Una mica de Python" /><link rel="up" href="index.html" title="A Byte of Python - Una mica de Python" /><link rel="prev" href="ch07s08.html" title="Resum" /><link rel="next" href="ch08s02.html" title="Fitxers pre-compilats .pyc" /></head><body>
<div class="header">
<strong><a href="http://www.byteofpython.info/" class="header-link">A Byte of Python</a></strong>
</div>
<div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 8. Mòduls</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s08.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch08s02.html">Next</a></td></tr></table><hr /></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="modules"></a>Chapter 8. Mòduls</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ch08.html#modules-intro">Introducció</a></span></dt><dd><dl><dt><span class="section"><a href="ch08.html#using-sys-module">Fent servir el mòdul sys</a></span></dt></dl></dd><dt><span class="section"><a href="ch08s02.html">Fitxers pre-compilats .pyc</a></span></dt><dt><span class="section"><a href="ch08s03.html">La instrucció from..import</a></span></dt><dt><span class="section"><a href="ch08s04.html">El nom d'un mòdul</a></span></dt><dd><dl><dt><span class="section"><a href="ch08s04.html#using-name">Fent servir el nom del mòdul</a></span></dt></dl></dd><dt><span class="section"><a href="ch08s05.html">Desenvolupant els nostres propis mòduls</a></span></dt><dd><dl><dt><span class="section"><a href="ch08s05.html#creating-modules">Desenvolupant els nostres propis mòduls</a></span></dt><dt><span class="section"><a href="ch08s05.html#using-from-import">from..import</a></span></dt></dl></dd><dt><span class="section"><a href="ch08s06.html">La funció dir()</a></span></dt><dd><dl><dt><span class="section"><a href="ch08s06.html#using-dir">Ús de la funció dir</a></span></dt></dl></dd><dt><span class="section"><a href="ch08s07.html">Resum</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="modules-intro"></a>Introducció</h2></div></div></div><p>
		
		Fins ara hem vist que podem reusar codi als nostres programes mitjançant funcions. Però, què passa si volem tornar a fer servir a altres programes les funcions que hem definit? La resposta està en els mòduls. Un mòdul és bàsicament un fitxer que conté la definició de funcions i variables. Per a reusar-les a altres programes, el nom del fitxer que conté el mòdul <span class="bold"><strong>necessàriament</strong></span> ha de tenir l'extensió <code class="filename">.py</code>. 
		
		</p><p>
		
		Un mòdul pot ser <span class="emphasis"><em>importat</em></span> per un altre programa de manera que aquest programa pugui accedir a les funcionalitats que defineix el mòdul. Així és com fem servir la biblioteca estàndard de Python. Primer de tot, veiem com usar els mòduls de la biblioteca estàndard.
		
		</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="using-sys-module"></a>Fent servir el mòdul sys</h3></div></div></div><div class="example"><a id="id296557"></a><p class="title"><b>Example 8.1. Fent servir el mòdul sys</b></p><pre class="programlisting">
				
<span class="py-comment">#!/usr/bin/python</span>
<span class="py-comment"># Filename: using_sys.py</span>

<span class="py-statement">import</span> <span class="py-builtin">sys</span>

<span class="py-statement">print</span> <span class="py-string">'Els arguments de la línia de comandes són:'</span>
<span class="py-statement">for</span> i <span class="py-statement">in</span> <span class="py-builtin">sys</span>.argv:
	<span class="py-statement">print</span> i

<span class="py-statement">print</span> <span class="py-string">'\n\nEl valor de PYTHONPATH és'</span>, <span class="py-builtin">sys</span>.path, <span class="py-string">'\n'</span>
				
				</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id296570"></a>Sortida</h4></div></div></div><pre class="screen">
				
$ python using_sys.py  nosaltres som arguments
Els arguments de la línia de comandes són:
using_sys.py
nosaltres
som
arguments


El valor de PYTHONPATH és ['/home/swaroop/byte/code', '/usr/lib/python23.zip',
'/usr/lib/python2.3', '/usr/lib/python2.3/plat-linux2',
'/usr/lib/python2.3/lib-tk', '/usr/lib/python2.3/lib-dynload',
'/usr/lib/python2.3/site-packages', '/usr/lib/python2.3/site-packages/gtk-2.0']
				
				</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id296585"></a>Com funciona</h4></div></div></div><p>
				
				Primer de tot, <span class="emphasis"><em>importem</em></span> el mòdul <code class="literal">sys</code> fent servir l’expressió <code class="literal">import</code>. D’aquesta manera diem al Python que volem fer servir aquest mòdul. El mòdul <code class="literal">sys</code> conté funcionalitat relacionada amb l’interpret de Python i amb el seu entorn.				
				</p><p>
				
				Quan Python executa la instrucció <code class="literal">import sys</code> el que fa és cercar el fitxer <code class="filename">sys.py</code> a algun dels directoris inclosos a la variable <code class="varname">sys.path</code>. En cas de trobar el fitxer, s’executa les instruccions que apareguin al bloc principal del mòdul importat i, a partir d’aquest moment el contingut del mòdul resta  <span class="emphasis"><em>disponible</em></span> per ser usat des del programa que l’importa. Tinguem present que la inicialització es realitza <span class="emphasis"><em>una única vegada</em></span> en el moment que importem el mòdul. Per cert, 'sys' és una abreviació de 'system'.
				
				</p><p>
				
				Podem accedir a la variable <code class="varname">argv</code> del mòdul <code class="literal">sys</code> fent servir la notació amb punt - <code class="varname">sys.argv</code>. Un dels avantatges d’aquesta notació és que el nom no colisiona amb cap altra variable <code class="varname">argv</code> que pugui fer servir el programa, a l’hora que indica clarament que aquest nom forma part del mòdul <code class="literal">sys</code>.
				
				</p><p>
				
				La variable <code class="varname">sys.argv</code> és una  <span class="emphasis"><em>llista</em></span> de strings (les llistes s’expliquen en detall en una propera
				<a href="ch09s02.html" title="Llistes">secció</a>). En concret, <code class="varname">sys.argv</code> conté la llista dels <span class="emphasis"><em>arguments de la línia de comanda</em></span>, és a dir, els arguments passats al programa quan és cridat des de la línia de comanda.
				
				</p><p>
				
				Si estem fent servir un IDE per a escriure i executar els nostres programes, haurem de cercar com especificar els arguments de línia de comanda entre les opcions del menú de l’entorn integrat.
				
				</p><p>
				
				Quan escrivim <code class="literal">python using_sys.py nosaltres som arguments</code>, s’executa el mòdul <code class="filename">using_sys.py</code> amb el programa <span><strong class="command">python</strong></span> i, la resta d’elements que apareixen a continuació, són els arguments que passem al programa. Python emmagatzema aquests arguments a la variable <code class="varname">sys.argv</code>.
				</p><p>
				
				Recordem que el primer dels elements de la llista 
				<code class="varname">sys.argv</code> és el nom del mòdul. Així tindrem que 
				<code class="literal">'using_sys.py'</code> és el valor de <code class="varname">sys.argv[0]</code>, <code class="literal">'nosaltres'</code> correspon a <code class="varname">sys.argv[1]</code>, <code class="literal">'som'</code> és <code class="varname">sys.argv[2]</code> i finalment <code class="literal">'arguments'</code> és <code class="varname">sys.argv[3]</code>. Fixem-nos que Python comença a comptar a partir de 0, no des de 1.
				
				</p><p>
				
				<code class="varname">sys.path</code> conté la llista de noms de directori on es poden trobar els mòduls importats. Observem que el primer string de <code class="varname">sys.path</code> està buit – aquest string buit indica que el directori actual també és part de <code class="varname">sys.path</code>. De la mateixa manera que passa amb la variable d’entorn <code class="envar">PYTHONPATH</code>. Això implica que podem importar directament mòduls situats en el directori actual. En altre cas, haurem de col·locar els nostres mòduls en algun dels directoris llistats a <code class="varname">sys.path</code>.
				
				</p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s08.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch08s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Resum </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Fitxers pre-compilats .pyc</td></tr></table></div></body></html>
